<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è®°ä¸€æ¬¡ç³»ç»Ÿå‰ç«¯åº•å±‚å‡çº§æ€»ç»“ | RJW&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/sl.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="ä½ è‹¥ç››å¼€ï¼Œè´è¶è‡ªæ¥">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.1c793696.css" as="style"><link rel="preload" href="/assets/js/app.69ab4a99.js" as="script"><link rel="preload" href="/assets/js/3.3b39e7a0.js" as="script"><link rel="preload" href="/assets/js/1.88acf310.js" as="script"><link rel="preload" href="/assets/js/27.c4fd3e8f.js" as="script"><link rel="preload" href="/assets/js/12.9e8433f0.js" as="script"><link rel="prefetch" href="/assets/js/10.d62c995d.js"><link rel="prefetch" href="/assets/js/11.1384acab.js"><link rel="prefetch" href="/assets/js/13.c3dd678c.js"><link rel="prefetch" href="/assets/js/14.77235c73.js"><link rel="prefetch" href="/assets/js/15.9538787d.js"><link rel="prefetch" href="/assets/js/16.8917779f.js"><link rel="prefetch" href="/assets/js/17.4e25faa6.js"><link rel="prefetch" href="/assets/js/18.8d0e9663.js"><link rel="prefetch" href="/assets/js/19.0ef6d18e.js"><link rel="prefetch" href="/assets/js/20.f9f00376.js"><link rel="prefetch" href="/assets/js/21.0174c86d.js"><link rel="prefetch" href="/assets/js/22.bf304af6.js"><link rel="prefetch" href="/assets/js/23.67fbfbae.js"><link rel="prefetch" href="/assets/js/24.13491854.js"><link rel="prefetch" href="/assets/js/25.b91a31fa.js"><link rel="prefetch" href="/assets/js/26.d7c907d5.js"><link rel="prefetch" href="/assets/js/28.3c811814.js"><link rel="prefetch" href="/assets/js/29.b0ecd0bd.js"><link rel="prefetch" href="/assets/js/30.4de5466b.js"><link rel="prefetch" href="/assets/js/31.8677ab92.js"><link rel="prefetch" href="/assets/js/4.078135db.js"><link rel="prefetch" href="/assets/js/5.8d61b07d.js"><link rel="prefetch" href="/assets/js/6.f943569e.js"><link rel="prefetch" href="/assets/js/7.85eba70b.js"><link rel="prefetch" href="/assets/js/8.c86ada2b.js"><link rel="prefetch" href="/assets/js/9.97d634f1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1c793696.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>RJW's Blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>RJW</span>
          Â Â 
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">RJW's Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/koa2/" class="nav-link"><i class="iconfont undefined"></i>
  koa2
</a></li><li class="dropdown-item"><!----> <a href="/categories/GraphQL/" class="nav-link"><i class="iconfont undefined"></i>
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/è„šæ‰‹æ¶/" class="nav-link"><i class="iconfont undefined"></i>
  è„šæ‰‹æ¶
</a></li><li class="dropdown-item"><!----> <a href="/categories/jsåŸºç¡€/" class="nav-link"><i class="iconfont undefined"></i>
  jsåŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯å·¥å…·/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/categories/css/" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/categories/react-native/" class="nav-link"><i class="iconfont undefined"></i>
  react-native
</a></li><li class="dropdown-item"><!----> <a href="/categories/æ€§èƒ½ä¼˜åŒ–/" class="nav-link"><i class="iconfont undefined"></i>
  æ€§èƒ½ä¼˜åŒ–
</a></li><li class="dropdown-item"><!----> <a href="/categories/é‡æ„/" class="nav-link"><i class="iconfont undefined"></i>
  é‡æ„
</a></li><li class="dropdown-item"><!----> <a href="/categories/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/categories/å·¥å…·/" class="nav-link"><i class="iconfont undefined"></i>
  å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/categories/vueæºç /" class="nav-link"><i class="iconfont undefined"></i>
  vueæºç 
</a></li><li class="dropdown-item"><!----> <a href="/categories/tool/" class="nav-link"><i class="iconfont undefined"></i>
  tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="http://shooterblog.site/Notebook/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ğŸ“ ä¸ªäººç¬”è®°æœ¬
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/shooterRao" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><img src="https://avatars1.githubusercontent.com/u/23609695?s=400&amp;u=d2db8f6efdee5add420addf7f89b916f7ef47ca7&amp;v=4" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    RJW
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>19</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>24</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/koa2/" class="nav-link"><i class="iconfont undefined"></i>
  koa2
</a></li><li class="dropdown-item"><!----> <a href="/categories/GraphQL/" class="nav-link"><i class="iconfont undefined"></i>
  GraphQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/è„šæ‰‹æ¶/" class="nav-link"><i class="iconfont undefined"></i>
  è„šæ‰‹æ¶
</a></li><li class="dropdown-item"><!----> <a href="/categories/jsåŸºç¡€/" class="nav-link"><i class="iconfont undefined"></i>
  jsåŸºç¡€
</a></li><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯å·¥å…·/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/categories/css/" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/categories/react-native/" class="nav-link"><i class="iconfont undefined"></i>
  react-native
</a></li><li class="dropdown-item"><!----> <a href="/categories/æ€§èƒ½ä¼˜åŒ–/" class="nav-link"><i class="iconfont undefined"></i>
  æ€§èƒ½ä¼˜åŒ–
</a></li><li class="dropdown-item"><!----> <a href="/categories/é‡æ„/" class="nav-link"><i class="iconfont undefined"></i>
  é‡æ„
</a></li><li class="dropdown-item"><!----> <a href="/categories/webpack/" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/categories/å·¥å…·/" class="nav-link"><i class="iconfont undefined"></i>
  å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/categories/vueæºç /" class="nav-link"><i class="iconfont undefined"></i>
  vueæºç 
</a></li><li class="dropdown-item"><!----> <a href="/categories/tool/" class="nav-link"><i class="iconfont undefined"></i>
  tool
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="http://shooterblog.site/Notebook/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  ğŸ“ ä¸ªäººç¬”è®°æœ¬
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/shooterRao" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>è®°ä¸€æ¬¡ç³»ç»Ÿå‰ç«¯åº•å±‚å‡çº§æ€»ç»“</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>RJW</span>
          Â Â 
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div data-v-2d5f533b><main class="page"><div class="page-title" style="display:none;"><h1 class="title">è®°ä¸€æ¬¡ç³»ç»Ÿå‰ç«¯åº•å±‚å‡çº§æ€»ç»“</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>RJW</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2019-04-27</span></i> <!----> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>vue</span><span class="tag-item" data-v-3b7f5bdf>é‡æ„</span><span class="tag-item" data-v-3b7f5bdf>å‰ç«¯æ¶æ„</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <p>å¹´åå›æ¥ï¼Œç›´æ¥ä»å¹¿å·é£å»ä¸Šæµ·ï¼Œå‚ä¸äº†ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç±»åå°ç®¡ç†ç³»ç»Ÿ(å°é—­å¼€å‘å®Œåç»Ÿè®¡æœ‰10w+è¡Œä»£ç )çš„å¼€å‘ï¼Œå¹¶è´Ÿè´£äº†è¯¥ç³»ç»Ÿçš„åº•å±‚å‡çº§å’Œå­ç³»ç»Ÿçš„å¼€å‘ï¼Œåœ¨å‡çº§å’Œå¼€å‘è¿‡ç¨‹æœŸé—´ï¼Œé‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œåœ¨è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­å­¦åˆ°äº†å¾ˆå¤šï¼Œè§‰å¾—å¾ˆæœ‰å¿…è¦è¿›è¡Œæ€»ç»“å¤ç›˜ä¸€ä¸‹ï¼Œä¸‹é¢å°±æ¥èŠèŠè¿™æ¬¡å‡çº§ç³»ç»Ÿçš„è¿‡ç¨‹ã€‚</p> <h2 id="å…³äºè¿™æ¬¡å‡çº§"><a href="#å…³äºè¿™æ¬¡å‡çº§" class="header-anchor">#</a> å…³äºè¿™æ¬¡å‡çº§</h2> <p>å¬åŒäº‹è¯´ï¼Œå½“æ—¶æ—¶é—´æ¯”è¾ƒæ€¥ï¼Œå¯¹<code>vuecli3</code>ä¸å¤ªç†Ÿæ‚‰ï¼Œå°±é€‰äº†åŸºäº<code>vuecli2</code>è¿›è¡Œå¿«é€Ÿå¼€å‘ã€‚å› ä¸ºæœ‰<strong>6</strong>ä¸ªç³»ç»Ÿï¼Œé¡µé¢éå¸¸å¤šï¼Œæ‰€ä»¥åœ¨åº•å±‚ä»£ç çš„ä¸Šæ²¡æœ‰å¤ªå¤šçš„æ—¶é—´è¿›è¡Œä¼˜åŒ–ã€‚åœ¨æˆ‘å‚ä¸è¿›æ¥ä¹‹åï¼Œæˆ‘æ”¶åˆ°äº†ä¸€äº›åŒäº‹çš„åé¦ˆå’Œè¿˜æ²¡æœ‰è§£å†³çš„é—®é¢˜ï¼Œæ¯”å¦‚é¦–å±åŠ è½½æ…¢ï¼Œè·¯ç”±è®¾è®¡å­˜åœ¨é—®é¢˜ï¼Œåˆ·æ–°é¡µé¢èœå•æ— æ³•é«˜äº®ç­‰ç­‰ã€‚è·Ÿå¼€å‘çš„å°ä¼™ä¼´å’Œé¢†å¯¼æ²Ÿé€šä¸€ç•ªä¹‹åï¼Œä»–ä»¬å†³å®šè®©æˆ‘å»è´Ÿè´£è§£å†³å½“å‰çš„è¿™äº›é—®é¢˜ï¼Œè¿˜æœ‰é‡æ–°è®¾è®¡ç³»ç»Ÿæ¶æ„ï¼Œæ‰€ä»¥å½“æ—¶å‹åŠ›ä¹Ÿæ˜¯æœ‰ç‚¹å¤§çš„ã€‚æˆ‘æƒ³äº†ä¸‹ï¼Œæ—¢ç„¶è¦å‡çº§é‡åšï¼Œé‚£å°±æŠŠæˆ‘ä¹‹å‰ç ”ç©¶å‡ºæ¥çš„æˆæœéƒ½ä¸€å¹¶ç”¨ä¸Šï¼Œç„¶åé€æ­¥è§£å†³ã€‚æˆ‘é‡æ–°èµ·äº†ä¸€ä¸ªå‰¯æœ¬ï¼Œä»0ï¸âƒ£æ­å»ºç¯å¢ƒï¼Œå¼€å§‹äº†è¿™æ®µå‡çº§æ—…ç¨‹ğŸ‘Š</p> <p>ä¸‹é¢æ˜¯å…³äºè¿™æ¬¡å‡çº§çš„featureï¼š</p> <ul><li>åŸºäºvuecli3</li> <li>layoutå±‚æŠ½è±¡ï¼Œå®ç°å­ç³»ç»Ÿé—´çµæ´»åˆ‡æ¢</li> <li>è·¯ç”±è¡¨æŒ‰å­ç³»ç»Ÿæ¨¡å—è¿›è¡Œåˆ’åˆ†æ³¨å†Œ</li> <li>å­ç³»ç»Ÿæ ¹æ®è·¯ç”±è¡¨ä¿¡æ¯æ¸²æŸ“ï¼Œå®ç°åŠ¨æ€å¯é…ç½®</li> <li>ç›®å½•ç»“æ„é‡æ–°æ•´ç†ï¼Œä»£ç è§„èŒƒçº¦æŸ</li> <li>ç»Ÿä¸€ç®¡ç†apiè¯·æ±‚å’Œå“åº”çš„æ‹¦æˆªï¼Œå¹¶è§„èŒƒå¥½apiè¯·æ±‚æ–¹å¼</li> <li>å…¨å±€ç»„ä»¶è§„èŒƒç®¡ç†ï¼Œé¿å…é‡å¤é€ è½®å­</li> <li>å…¨å±€ç»„ä»¶ã€æŒ‡ä»¤ã€vuex-moduleè‡ªåŠ¨åŒ–æ³¨å†Œ</li> <li>sasså˜é‡åŠå‡½æ•°æ³¨å…¥ï¼Œå¸ƒå±€ä½¿ç”¨remæ–¹å¼</li> <li>jest å•å…ƒæµ‹è¯•</li> <li>jenkins+dockerè‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²</li> <li>é¦–å±ä¼˜åŒ–ã€å…¼å®¹IE11</li></ul> <p>ğŸ‘‡å¼€å§‹åˆ†ç‚¹è¿›è¡Œæ€»ç»“</p> <h2 id="å…³äºvuecli3"><a href="#å…³äºvuecli3" class="header-anchor">#</a> å…³äºvuecli3</h2> <p>åœ¨ä¸Šä¸¤ä¸ªæœˆï¼Œvueå®˜æ–¹æ¨å‡ºäº†vuecli3çš„<code>release</code>ç‰ˆã€‚è·Ÿä»¥å¾€ç†Ÿæ‚‰çš„cli2ç›¸æ¯”ï¼Œcli3ç”Ÿæˆçš„é¡¹ç›®ç¡®å®å˜äº†ä¸å°‘ã€‚é¦–å…ˆå®˜æ–¹å¼€å§‹æ¨å´‡æ— <code>Eject</code>åŒ–ï¼Œå…³äºwebpackçš„ç›¸å…³é…ç½®å…¨éƒ¨éšè—ï¼Œåªæä¾›<code>vue.config.js</code>æ¥å£è¿›è¡Œç›¸å…³é…ç½®çš„æ›´æ”¹ã€‚è¿™æ ·ï¼Œå¯¹äºä¸æ€ä¹ˆéœ€è¦æ›´æ”¹webpacké…ç½®çš„å¼€å‘è€…æ¥è¯´ï¼Œå¯ä»¥æŠŠæ³¨æ„åŠ›éƒ½æ”¾åœ¨ä¸šåŠ¡å±‚ä¸Šï¼Œæ— é¡»è¿‡å¤šå…³å¿ƒåº•å±‚æ’ä»¶çš„é…ç½®ä¿¡æ¯ã€‚ä½†æ˜¯å¯¹äºè¦å¤§é‡ä¿®æ”¹webpacké…ç½®çš„å¼€å‘è€…æ¥è¯´ï¼Œéœ€è¦å­¦ä¹ <code>webpack-chain</code>çš„ä½¿ç”¨ï¼Œæ‰èƒ½å‡†ç¡®å¾—æ›´æ”¹webpackçš„é…ç½®ä¿¡æ¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œvuecli3å¯¹ä¸€äº›ç”Ÿæ€å’Œä¾èµ–éƒ½è¿›è¡Œäº†å…¨é¢çš„å‡çº§ï¼Œæ¯”å¦‚<code>Bebel7</code>,<code>webpack</code>å‡çº§åˆ°äº†4.xï¼Œä»£ç ç¼–è¯‘ä¼˜åŒ–ï¼Œæ‰“åŒ…é€Ÿåº¦éƒ½æœ‰äº†ç›¸å…³æå‡ã€‚</p> <p>å…¶å®ï¼Œå¯¹äºæˆ‘ä»¬è¿™ç›®å‰çš„é¡¹ç›®æ¥è¯´ï¼Œä»cli2è¿ç§»åˆ°cli3çš„æˆæœ¬å¹¶ä¸å¤§ï¼Œåº•å±‚webpackçš„é…ç½®ä¿®æ”¹å¾—å¹¶ä¸å¤šï¼Œcli2èƒ½é…çš„cli3åŒæ ·èƒ½é…ï¼Œåªæ˜¯é…çš„æ–¹æ³•ç¨æœ‰ä¸åŒã€‚ä¸Šå±‚çš„é¡µé¢éƒ½å¯ä»¥æ— ç¼è¿›è¡Œè¿ç§»ã€‚å¯¹äº<strong>cli2ç‰ˆå¢åŠ çš„webpacké…ç½®</strong>ï¼Œæœ‰ä»¥ä¸‹å‡ é¡¹ï¼š</p> <ul><li><code>sass-resources-loader</code>æ³¨å…¥å…¨å±€scsså˜é‡</li> <li>ç”Ÿäº§ç¯å¢ƒå‰”é™¤<code>console.log</code></li> <li>æ‰“åŒ…æ–‡ä»¶å‡ºå£è·¯å¾„ä¿®æ”¹</li></ul> <p><code>cli3</code>å®ç°ä»¥ä¸Šå‡ ç‚¹çš„æ–¹æ³•ï¼š</p> <ul><li>æ³¨å…¥å…¨å±€scsså˜é‡çš„æ–¹å¼:</li></ul> <p>åœ¨<code>vue.config.js</code>ä¸­å¢åŠ ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  css<span class="token operator">:</span> <span class="token punctuation">{</span>
    loaderOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç»™ sass-loader ä¼ é€’é€‰é¡¹</span>
      sass<span class="token operator">:</span> <span class="token punctuation">{</span>
        data<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@import &quot;@/styles/mixin.scss&quot;;</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>ç”Ÿäº§ç¯å¢ƒå‰”é™¤<code>console.log</code></li></ul> <p>åŒæ ·åœ¨<code>vue.config.js</code>ä¸­å¢åŠ ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å¼•å…¥uglifyjsæ’ä»¶</span>
<span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;uglifyjs-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  configureWebpack<span class="token operator">:</span> <span class="token punctuation">{</span>
    optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
      minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          uglifyOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            compress<span class="token operator">:</span> <span class="token punctuation">{</span>
              warnings<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              drop_console<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              drop_debugger<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// å¹¶è¡Œå‹ç¼©</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>æ‰“åŒ…æ–‡ä»¶å‡ºå£è·¯å¾„ä¿®æ”¹</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  baseUrl<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="å®¹å™¨å¸ƒå±€ç»„ä»¶é‡å†™"><a href="#å®¹å™¨å¸ƒå±€ç»„ä»¶é‡å†™" class="header-anchor">#</a> å®¹å™¨å¸ƒå±€ç»„ä»¶é‡å†™</h2> <p>å…³äºç³»ç»Ÿçš„å¸ƒå±€æ–¹å¼ï¼Œæˆ‘ç®€å•ç”»äº†ä¸‹ï¼š</p> <p><img src="https://img-1257816861.cos.ap-guangzhou.myqcloud.com/blog01.png" alt="Layout"></p> <p>ä¹‹å‰åŸºäºcli2çš„ç‰ˆæœ¬ï¼Œæ˜¯æŠŠ<strong>ç³»ç»Ÿå†…å®¹</strong>ç”¨<code>&lt;router-view/&gt;</code>è¿›è¡Œç®¡ç†ï¼Œè“è‰²åœˆä¸­çš„åœ°æ–¹åˆåŒ…äº†ä¸€å±‚<code>&lt;router-view/&gt;</code>ï¼Œå¤–é¢çš„è·¯ç”±é‡‡ç”¨åŠ¨æ€è·¯ç”±å»ç®¡ç†ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;System&quot;</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span> <span class="token string">&quot;/System/:id&quot;</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> System
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å¯¹åº”ç³»ç»Ÿé¡µé¢çš„url<code>http://localhost:8080/#/System/0/FZBZDataview</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>id: 0 =&gt; ç³»ç»Ÿ1
id: 1 =&gt; ç³»ç»Ÿ2
id: 2 =&gt; ç³»ç»Ÿ3
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™ç§è®¾è®¡æœ‰ä¸ª<strong>é—®é¢˜</strong>ï¼Œå°±æ˜¯åœ¨vueåŠ¨æ€è·¯ç”±ä¸­ï¼Œ<code>/System/:id</code>ä¸­çš„<code>id</code>å¯ä»¥æ˜¯ä»»ä½•å€¼ï¼Œå¦‚æœä¸è¿›è¡Œåˆ¤æ–­éªŒè¯é€»è¾‘çš„è¯ï¼Œ<code>http://localhost:8080/#/System/xxx/FZBZDataview</code>éƒ½ä¼šè·³è½¬åˆ°è¯¥ç³»ç»Ÿé¡µé¢ï¼Œ<strong>å¹¶ä¸èƒ½è·³è½¬åˆ°æ­¤æ—¶åº”è¯¥è·³è½¬åˆ°çš„404é¡µé¢</strong></p> <p>è¿˜æœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯åœ¨èœå•é«˜äº®çš„å¤„ç†ä¸Šï¼Œç”±äºåœ¨ä¸Šé¢è®¾è®¡çš„åŸºç¡€ä¸Šï¼Œé¢å¤–åŠ äº†å¾ˆå¤šçŠ¶æ€è¿›è¡Œç®¡ç†ï¼Œå¯¼è‡´å®ç°èœå•é«˜äº®æ–¹å¼è¿‡äºå¤æ‚äº†ï¼Œäºæ˜¯æˆ‘é¡ºä¾¿æŠŠå®ç°èœå•é«˜äº®çš„æ–¹å¼ä¸€å¹¶é‡å†™äº†ã€‚</p> <p>ä¸‹é¢å…ˆæ¥èŠèŠæˆ‘å¯¹äºå®¹å™¨ç»„ä»¶çš„è®¾è®¡æ€è·¯ï¼š</p> <p><img src="https://img-1257816861.cos.ap-guangzhou.myqcloud.com/blog02.png" alt="è®¾è®¡æ€è·¯"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>â”œâ”€â”€ Layout
â”‚Â Â  â”œâ”€â”€ Header                 # å¤´éƒ¨ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ SubList                # å·¦ä¾§èœå•ç»„ä»¶
â”‚Â Â  â””â”€â”€ Layout.vue             # Layoutç»„ä»¶
|   â””â”€â”€ index.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>æŠŠå®¹å™¨ç»„ä»¶æŠ½è±¡å‡ºæ¥ï¼Œå¯¹äºä»¥åéœ€æ±‚å’ŒUIçš„å˜åŠ¨ï¼Œä¹Ÿå¯ä»¥çµæ´»åº”å˜äº†</p></blockquote> <ul><li>å…ˆæ¥è§£å†³èœå•é«˜äº®</li></ul> <p>èœå•é«˜äº®ç”¨<code>$route</code>æ¥è¿›è¡Œå¤„ç†çš„è¯ï¼Œå°±æ¯”è¾ƒç®€æ´äº†</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ç»„ä»¶computed</span>
computed<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">currentPreRouteName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>matched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// é«˜äº®list-item</span>
  <span class="token function">computedClass</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;list-item&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> currentPreRouteName <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPreRouteName <span class="token operator">===</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      className<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;active&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> className<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>åœ¨æ¨¡æ¿ä¸Šçš„å¤„ç†,</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-nav-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>computedClass(navItem)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navItem in navList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navItem.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navItem.path<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{navItem.meta.navTitle}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ¢æˆè®¡ç®—<code>$route</code>çš„<code>path</code>è¿›è¡Œç®¡ç†ï¼Œæ¯”èµ·ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œä¸éœ€è¦å¢åŠ é¢å¤–çš„çŠ¶æ€ï¼Œä¸éœ€è¦watchï¼Œä¹Ÿè§£å†³äº†ä¹‹å‰åˆ·æ–°é¡µé¢æ— æ³•è‡ªåŠ¨é«˜äº®çš„é—®é¢˜(ä¹‹å‰ä¸ºä»€ä¹ˆä¸èƒ½é«˜äº®ï¼Œå…·ä½“åŸå› æˆ‘è¿˜æ²¡ä»”ç»†ç ”ç©¶ï¼Œé¢å¤–åŠ çš„çŠ¶æ€å¤ªå¤šç»•å¾—æ¯”è¾ƒæ™•ğŸ˜‚)</p> <ul><li>è§£å†³æ— æ³•è·³è½¬404é¡µé¢</li></ul> <p>ä¹‹å‰ä¸èƒ½è·³è½¬åˆ°404é¡µé¢çš„åŸå› ä¸»è¦åœ¨ä¹‹å‰ç”¨äº†åŠ¨æ€è·¯ç”±å»æ¸²æŸ“ç³»ç»Ÿé¡µé¢ï¼Œæ²¡æœ‰åŠ é€»è¾‘å¤„ç†æ‹¦æˆªè·³è½¬åˆ°404ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘é‡‡å–çš„è§£å†³æ–¹æ¡ˆæ˜¯å–æ¶ˆç”¨åŠ¨æ€è·¯ç”±å»ç®¡ç†ï¼Œæ”¹æˆåŒ¹é…å¯¹åº”è·¯ç”±æ¸²æŸ“å¯¹åº”çš„ç³»ç»Ÿ</p> <p>ä¸¾ä¸ªğŸŒ°ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&quot;/FZBZ&quot;</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&quot;FZBZ&quot;</span><span class="token punctuation">,</span>
  meta<span class="token operator">:</span> <span class="token punctuation">{</span>
    navTitle<span class="token operator">:</span> <span class="token string">&quot;ç³»ç»Ÿä¸€&quot;</span><span class="token punctuation">,</span>
    icon<span class="token operator">:</span> <span class="token string">&quot;icon-fzbz&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  redirect<span class="token operator">:</span> <span class="token string">&quot;/FZBZ/BaseDateHandle&quot;</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> Layout<span class="token punctuation">,</span>
  children<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&quot;BaseDateHandle&quot;</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">&quot;BaseDateHandle&quot;</span><span class="token punctuation">,</span>
      meta<span class="token operator">:</span> <span class="token punctuation">{</span>
        navTitle<span class="token operator">:</span> <span class="token string">&quot;åŸºæœŸæ•°æ®å¤„ç†&quot;</span><span class="token punctuation">,</span>
        icon<span class="token operator">:</span> <span class="token string">&quot;icon-shujuchanpinliulan&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;BaseDateHandle&quot; */</span> <span class="token string">&quot;FZBZ/BaseDateHandle&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å¯¹åº”è·¯ç”±è·¯å¾„ä¾¿æ˜¯<code>http://localhost:9096/#/FZBZ/BaseDateHandle</code>ï¼Œå°‘äº†ä¸€å±‚router-viewï¼Œurlä¹Ÿç®€æ´äº†è®¸å¤šã€‚</p> <p>åŠ ä¸ª404è·³è½¬ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// æ²¡åŒ¹é…åˆ°çš„è·¯å¾„éƒ½è·³è½¬åˆ°404é¡µé¢</span>
<span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&quot;404Page&quot;</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> error404Page
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ç³»ç»Ÿèœå•æ”¹ä¸ºæ ¹æ®è·¯ç”±è¡¨ä¿¡æ¯è¿›è¡Œæ¸²æŸ“"><a href="#ç³»ç»Ÿèœå•æ”¹ä¸ºæ ¹æ®è·¯ç”±è¡¨ä¿¡æ¯è¿›è¡Œæ¸²æŸ“" class="header-anchor">#</a> ç³»ç»Ÿèœå•æ”¹ä¸ºæ ¹æ®è·¯ç”±è¡¨ä¿¡æ¯è¿›è¡Œæ¸²æŸ“</h2> <p>ä¹‹å‰ç³»ç»Ÿèœå•æ˜¯è¯·æ±‚æœ¬åœ°è‡ªå®šä¹‰jsonå»æ¸²æŸ“çš„ï¼Œè¿™ç§æ–¹å¼æˆ‘è®¤ä¸ºå’Œè·¯ç”±è¡¨ä¸èƒ½å½¢æˆå¾ˆå¥½çš„æ˜ å°„ï¼Œæœªæ¥å¦‚æœæ¥å…¥æƒé™çš„è¯ä¹Ÿå¾ˆä¸æ–¹ä¾¿è¿›è¡Œæ§åˆ¶ï¼Œæ‰€ä»¥æˆ‘ç»Ÿä¸€æ”¹æˆè¯»å–è·¯ç”±è¡¨ä¿¡æ¯è¿›è¡Œæ¸²æŸ“</p> <p>æˆ‘å†™äº†å‡ ä¸ªå·¥å…·å‡½æ•°ï¼Œæ ¹æ®è·¯ç”±è¡¨å»è¿‡æ»¤è·¯ç”±ä¿¡æ¯</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> routes <span class="token keyword">from</span> <span class="token string">&quot;@/router/routes&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @param {Object} item
 * @description åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨children
 * @returns Boolean
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">hasChild</span> <span class="token operator">=</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @param {Array} routes è·¯ç”±è¡¨
 * @description æ ¹æ®è·¯ç”±è¡¨è·å–NavList
 * @returns {Array}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getNavList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> navList <span class="token operator">=</span> routes
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>navTitle<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasChild</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// pathç½®ç©ºï¼Œrouter-linkå°±å¯ä»¥é˜»æ­¢è¯¥å¯¼èˆª</span>
        item<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> navList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @param {Object} currentRoute $route
 * @description æ ¹æ®å½“å‰é¡µé¢è·¯ç”±è¿›è¡ŒåŒ¹é…è·¯ç”±è¡¨ï¼Œè·å–äºŒçº§è·¯ç”±è¡¨
 * @returns {Array} subNavList
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getSubNavList</span> <span class="token operator">=</span> <span class="token parameter">currentRoute</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…ˆè·å–ä¸€çº§è·¯ç”±å</span>
  <span class="token keyword">const</span> preRouteName <span class="token operator">=</span> currentRoute<span class="token punctuation">.</span>matched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> routes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token comment">// ä»è·¯ç”±è¡¨é‡Œé¢æ‰¾åˆ°å¯¹åº”çš„äºŒçº§èœå•</span>
  <span class="token keyword">let</span> SubNavList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">++</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>preRouteName <span class="token operator">===</span> routes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      SubNavList <span class="token operator">=</span> routes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> SubNavList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>ä¸€ä¸ªæ˜¯è·å–ç³»ç»Ÿèœå•ï¼Œä¸€ä¸ªæ˜¯æ ¹æ®ç³»ç»Ÿåå»è·å–å¯¹åº”çš„äºŒçº§å­èœå•ä¿¡æ¯</p> <p>Portalé¡µå’ŒLayouté¡µçš†ç”±è¯¥æ–¹å¼è¿›è¡Œæ¸²æŸ“</p> <h2 id="è·¯ç”±è¡¨æŒ‰ç³»ç»Ÿåˆ’åˆ†è¿›è¡Œé‡æ„"><a href="#è·¯ç”±è¡¨æŒ‰ç³»ç»Ÿåˆ’åˆ†è¿›è¡Œé‡æ„" class="header-anchor">#</a> è·¯ç”±è¡¨æŒ‰ç³»ç»Ÿåˆ’åˆ†è¿›è¡Œé‡æ„</h2> <p>å› ä¸ºæœ‰6ä¸ªç³»ç»Ÿï¼Œæ¯ä¸ªç³»ç»Ÿåˆæœ‰å‡ åä¸ªé¡µé¢ï¼Œè¿™æ ·ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªjsé‡Œé¢ï¼Œä¼šæ˜¾å¾—æ— æ¯”ç¬¨é‡ï¼Œä¹Ÿå¾ˆå®¹æ˜“æ”¹é”™é‡Œé¢çš„è·¯ç”±ä¿¡æ¯ï¼Œæ‰€ä»¥ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘æ”¹æˆæŒ‰ç³»ç»Ÿååˆ’åˆ†è·¯ç”±è¡¨ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>â”œâ”€â”€ router                      # è·¯ç”±è¡¨ç®¡ç†
â”‚Â Â  â””â”€â”€ routes
â”‚Â Â      â”œâ”€â”€ fzbz.js             
â”‚Â Â      â”œâ”€â”€ fzsc.js             
â”‚Â Â      â”œâ”€â”€ ghss.js             
â”‚Â Â      â”œâ”€â”€ jcyj.js             
â”‚Â Â      â”œâ”€â”€ zbmx.js             
â”‚Â Â      â””â”€â”€ zxpg.js             
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>index.js</code>é‡Œé¢æ³¨å†Œè·¯ç”±ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// nav-listæŒ‰ç…§æŒ‚è½½è·¯ç”±é¡ºåºæ¸²æŸ“</span>
<span class="token keyword">import</span> fzbz <span class="token keyword">from</span> <span class="token string">&quot;./fzbz&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> fzsc <span class="token keyword">from</span> <span class="token string">&quot;./fzsc&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ghss <span class="token keyword">from</span> <span class="token string">&quot;./ghss&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> jcyj <span class="token keyword">from</span> <span class="token string">&quot;./jcyj&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> zxpg <span class="token keyword">from</span> <span class="token string">&quot;./zxpg&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> zbmx <span class="token keyword">from</span> <span class="token string">&quot;./zbmx&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>fzbz
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>fzsc
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>ghss
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>jcyj
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>zxpg
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>zbmx
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>è¿™æ ·çš„è¯ï¼Œå¯¹æ–°åŠ è¿›æ¥çš„å¼€å‘äººå‘˜ä¹Ÿä¼šéå¸¸å‹å¥½ï¼Œä¸€çœ¼å°±èƒ½çŸ¥é“è¯¥å»å“ªé‡Œé…ç½®è·¯ç”±è¡¨å•¦ğŸ˜</p> <h2 id="ç›®å½•ç»“æ„é‡æ–°æ•´ç†"><a href="#ç›®å½•ç»“æ„é‡æ–°æ•´ç†" class="header-anchor">#</a> ç›®å½•ç»“æ„é‡æ–°æ•´ç†</h2> <p>ä¹‹å‰çš„<code>src</code>ç›®å½•ç»“æ„</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ components                  # é¡µé¢å’Œé¡µé¢ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ App.vue                     # Vueæ ¹ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ main.js                     # é¡¹ç›®å…¥å£æ–‡ä»¶
â”‚Â Â  â”œâ”€â”€ router                      # è·¯ç”±
â”‚Â Â  â”œâ”€â”€ store                       # vuex
â”‚Â Â  â”œâ”€â”€ style                       # å…¨å±€css
â”‚Â Â  â”œâ”€â”€ utils                       # å·¥å…·å‡½æ•°
â”‚Â Â  â”œâ”€â”€ registerComponent           # æ³¨å†Œå…¨å±€ç»„ä»¶
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ•´ç†æˆğŸ‘‡ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ main.js                     # é¡¹ç›®å…¥å£æ–‡ä»¶
â”‚Â Â  â”œâ”€â”€ App.vue                     # Vueæ ¹ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ layout                      # å®¹å™¨å¸ƒå±€ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ api                         # åç«¯apiç»Ÿä¸€ç®¡ç†
â”‚Â Â  â”œâ”€â”€ assets                      # é™æ€æ–‡ä»¶
â”‚Â Â  â”œâ”€â”€ components                  # é€šç”¨ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ icon                        # icon
â”‚Â Â  â”œâ”€â”€ mock                        # mockjs
â”‚Â Â  â”œâ”€â”€ plugins                     # æ’ä»¶ç®¡ç†
â”‚Â Â  â”œâ”€â”€ register                    # ç»Ÿä¸€æ³¨å†Œechartsã€å…¨å±€ç»„ä»¶
â”‚Â Â  â”œâ”€â”€ router                      # è·¯ç”±è¡¨ç®¡ç†
â”‚Â Â  â”‚Â Â  â””â”€â”€ routes                  # ç³»ç»Ÿè·¯ç”±è¡¨
â”‚Â Â  â”œâ”€â”€ store                       # vuex
â”‚Â Â  â”œâ”€â”€ styles                      # å…¨å±€scsså˜é‡ã€å…¨å±€æ ·å¼
â”‚Â Â  â”œâ”€â”€ utils                       # é€šç”¨å·¥å…·å‡½æ•°
â”‚Â Â  â””â”€â”€ views                       # é¡µé¢
â””â”€â”€ vue.config.js                   # å·¥ç¨‹é…ç½®æ–‡ä»¶
â””â”€â”€ test                            # å•å…ƒæµ‹è¯•
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="pre-commit"><a href="#pre-commit" class="header-anchor">#</a> pre-commit</h2> <p>pre-commitä½œç”¨å¥½å¤„ä¸ç”¨å¤šè¯´ï¼Œgit commitå‰æ‰§è¡Œlint</p> <p>å®‰è£…<code>husky</code>ï¼Œ<code>lint-stage</code>æ’ä»¶ï¼Œpackage.jsonä¸­é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;src/**/*.{vue,js}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;yarn lint&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;git add&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;src/**/*.{json,md,css,scss}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;prettier --write&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;git add&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="sass-å‡½æ•°ç¼–å†™"><a href="#sass-å‡½æ•°ç¼–å†™" class="header-anchor">#</a> sass å‡½æ•°ç¼–å†™</h2> <p>é¢œè‰²ã€å­—ä½“ã€ç­‰å˜é‡å…¨å±€ç®¡ç†ï¼Œå„ç³»ç»ŸåŒç”¨ä¸€å¥—ï¼Œæ¯”å¦‚ï¼š</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@mixin</span> <span class="token function">scw</span><span class="token punctuation">(</span>$size<span class="token punctuation">,</span> $<span class="token property">color</span><span class="token punctuation">:</span> $fontColor_1<span class="token punctuation">,</span> $<span class="token property">weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> $size<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> $color<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> $weight<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
// ä¸€çº§å­—ä½“
<span class="token atrule"><span class="token rule">@mixin</span> T1</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@include</span> <span class="token function">scw</span><span class="token punctuation">(</span>1.46rem<span class="token punctuation">,</span> $fontColor_1<span class="token punctuation">,</span> 700<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
// äºŒçº§å­—ä½“
<span class="token atrule"><span class="token rule">@mixin</span> T2</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@include</span> <span class="token function">scw</span><span class="token punctuation">(</span>1.25rem<span class="token punctuation">,</span> $fontColor_1<span class="token punctuation">,</span> 700<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
// ä¸‰çº§å­—ä½“
<span class="token atrule"><span class="token rule">@mixin</span> T3</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@include</span> <span class="token function">scw</span><span class="token punctuation">(</span>0.94rem<span class="token punctuation">,</span> $fontColor_1<span class="token punctuation">,</span> 500<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>æ¯”å¦‚æŒ‰é’®çš„æ ·å¼ç®¡ç†ï¼Œåœ¨ç»„ä»¶é‡Œæ˜¯è¿™ä¹ˆç”¨çš„ï¼š</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@mixin</span> <span class="token function">btn-super</span><span class="token punctuation">(</span>$<span class="token property">size</span><span class="token punctuation">:</span> 1<span class="token punctuation">,</span> $<span class="token property">bgcolor</span><span class="token punctuation">:</span> $color1890ff<span class="token punctuation">,</span> $<span class="token property">fontcolor</span><span class="token punctuation">:</span> $colorffffff<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@if</span> $size == 1</span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@include</span> <span class="token function">B1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@if</span> $size == 2</span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@include</span> <span class="token function">B2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@if</span> $size == 3</span> <span class="token punctuation">{</span>
    <span class="token atrule"><span class="token rule">@include</span> <span class="token function">B3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
  <span class="token atrule"><span class="token rule">@include</span> <span class="token function">scw</span><span class="token punctuation">(</span>0.83rem<span class="token punctuation">,</span> $fontcolor<span class="token punctuation">,</span> normal<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token atrule"><span class="token rule">@include</span> <span class="token function">btn-assist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> $bgcolor<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> $bgcolor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æ­¤å¤–ï¼Œç³»ç»Ÿå…¨éƒ¨ä½¿ç”¨ <code>rem</code> å¸ƒå±€ï¼Œé‡‡ç”¨ <code>vw +font-size</code> æ–¹æ¡ˆï¼š</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 1vw <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="é¦–å±ä¼˜åŒ–"><a href="#é¦–å±ä¼˜åŒ–" class="header-anchor">#</a> é¦–å±ä¼˜åŒ–</h2> <p>ä¹‹å‰å¬è¯´ç”±äºé™æ€èµ„æºæ¯”è¾ƒå¤šï¼Œé¦–å±åŠ è½½æ¯”è¾ƒæ…¢ã€‚æˆ‘buildäº†ä¸‹å‘ç°ï¼Œ<code>app.js</code>å±…ç„¶é«˜è¾¾<strong>17m</strong>ï¼è¿™æ ·åŠ è½½é¦–å±è‚¯å®šæ…¢äº†ï¼æˆ‘è¿½è¸ªäº†ä¸‹å‘ç°ï¼Œéƒ½æ˜¯ä¸€äº›åœ°å›¾jsonæ–‡ä»¶å¤ªå¤§å¯¼è‡´çš„ï¼Œä¸»è¦æ˜¯ä¸‹é¢è¿™äº›ä»£ç äº§ç”Ÿçš„é—®é¢˜ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>echarts<span class="token punctuation">.</span><span class="token function">registerMap</span><span class="token punctuation">(</span><span class="token string">&quot;china&quot;</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../static/map/china.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
echarts<span class="token punctuation">.</span><span class="token function">registerMap</span><span class="token punctuation">(</span><span class="token string">&quot;guangzhou&quot;</span><span class="token punctuation">,</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../static/map/cities/guangzhou.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
echarts<span class="token punctuation">.</span><span class="token function">registerMap</span><span class="token punctuation">(</span><span class="token string">&quot;beijing&quot;</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../static/map/cities/beijing.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
echarts<span class="token punctuation">.</span><span class="token function">registerMap</span><span class="token punctuation">(</span><span class="token string">&quot;shenyang&quot;</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../static/map/cities/shenyang.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>require</code>æ˜¯åŒæ­¥å¼•å…¥ï¼Œwebpackä¼šæŠŠè¿™äº›åºå¤§çš„<code>json</code>å…¨éƒ¨åŒæ­¥æ‰“åŒ…åˆ°<code>app.js</code>é‡Œé¢ï¼Œæ‰€ä»¥ä¼šéå¸¸å¤§ã€‚åæ¥å‡¡ç«¥é‹æä¾›äº†ä¸€ä¸ªæ€è·¯ï¼Œé—®æˆ‘èƒ½ä¸èƒ½ç”¨å¼‚æ­¥åŠ è½½ï¼Œè¿™æ ·ä¼šä¸ä¼šä½“ç§¯å°ä¸€ç‚¹ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼ŒæŠŠä¸Šé¢ä»£ç æ”¹æˆè¯»å–æœ¬åœ°jsonï¼Œè¯»å–å®Œåå†è¿›è¡Œæ³¨å†Œï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼æ³¨å†Œjsonåœ°å›¾</span>
<span class="token keyword">const</span> jsonMap <span class="token operator">=</span> <span class="token punctuation">{</span>
  china<span class="token operator">:</span> <span class="token string">&quot;static/map/china.json&quot;</span><span class="token punctuation">,</span>
  chinacity<span class="token operator">:</span> <span class="token string">&quot;static/map/china-cities.json&quot;</span><span class="token punctuation">,</span>
  cj_citylevel<span class="token operator">:</span> <span class="token string">&quot;static/map/changjiang_city_level.json&quot;</span><span class="token punctuation">,</span>
  cj_up_mid_down<span class="token operator">:</span> <span class="token string">&quot;static/map/changjiang_up_mid_down.json&quot;</span><span class="token punctuation">,</span>
  cj_provincial<span class="token operator">:</span> <span class="token string">&quot;static/map/changjiang_provincial.json&quot;</span><span class="token punctuation">,</span>
  ningxiacity<span class="token operator">:</span> <span class="token string">&quot;static/map/Ningxia.json&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">in</span> jsonMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>jsonMap<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>jsonMap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      echarts<span class="token punctuation">.</span><span class="token function">registerMap</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ç»æµ‹è¯•ï¼Œæ‰“åŒ…åçš„ä½“ç§¯æ˜æ˜¾å‡å°‘ï¼ä½†æ˜¯ï¼Œè¿˜æœ‰ä¼˜åŒ–ç©ºé—´ï¼Œæ¯”å¦‚æœ‰äº›ç³»ç»Ÿçš„è·¯ç”±ç»„ä»¶ä¸æ˜¯å¼‚æ­¥ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å…¨éƒ¨æ”¹æˆç»„ä»¶æ‡’åŠ è½½</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;BaseDateHandle&quot; */</span> <span class="token string">&quot;FZBZ/BaseDateHandle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å†æ‰“åŒ…ï¼Œ<code>app.js</code>å·²ç»å‡å°‘åˆ°<code>180k</code>å·¦å³äº†ï¼Œä»<code>17m</code>åˆ°<code>180k</code>ï¼Œé€Ÿåº¦æå‡å¯ä»¥è¯´æ˜¯éå¸¸æ˜æ˜¾äº†ã€‚</p> <p>ä½†æ˜¯<code>vendor.js</code>è¿˜æ˜¯é«˜è¾¾<code>2m</code>ï¼Œä¸»è¦åŸå› ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹çš„åŒ…å¤ªå¤šï¼Œ<code>iview</code>ä¹Ÿæ²¡æ”¹æˆæŒ‰éœ€åŠ è½½ï¼Œ<code>echarts</code>ä¹Ÿæ˜¯ï¼Œä»¥åä¼šé’ˆå¯¹è¿™äº›åŒ…è¿›è¡Œç›¸å…³ä¼˜åŒ–ã€‚</p> <p>æ­¤å¤–ï¼Œä¹‹å‰æ‰“åŒ…çš„ä»£ç æ˜¯æ²¡æœ‰é…ç½®<code>gzip</code>çš„ï¼Œå¼€å¯<code>gzip</code>é€Ÿåº¦ä¼šæ›´å¿«ï¼Œä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä½¿ç”¨äº†webpackçš„ä¸€ä¸ªæ’ä»¶ï¼ŒåŠ ç‚¹é…ç½®å°±å¯å®ç°</p> <p><code>vue.config.js</code>å¢åŠ é…ç½®</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CompressionPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;compression-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> productionGzipExtensions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  configureWebpack<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// gzip</span>
    plugins<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">?</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        filename<span class="token operator">:</span> <span class="token string">&quot;[path].gz[query]&quot;</span><span class="token punctuation">,</span>
        algorithm<span class="token operator">:</span> <span class="token string">&quot;gzip&quot;</span><span class="token punctuation">,</span>
        test<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\\.(&quot;</span> <span class="token operator">+</span> productionGzipExtensions<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;|&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        threshold<span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
        minRatio<span class="token operator">:</span> <span class="token number">0.8</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>é¦–å±ä¼˜åŒ–ï¼Œæ°¸æ— æ­¢å¢ƒï¼</p> <h2 id="å…¼å®¹ie11"><a href="#å…¼å®¹ie11" class="header-anchor">#</a> å…¼å®¹IE11</h2> <p>è¿™ä¸ªç³»ç»Ÿéœ€è¦å…¼å®¹ie11ï¼Œç°åœ¨æœ‰äº† <code>babel</code> åŠ æŒï¼Œå¹¶ä¸éœ€è¦æ‹…å¿ƒå¤ªå¤š <code>js</code> æ–¹é¢çš„é—®é¢˜ã€‚ç°åœ¨cli3ä¹Ÿå·²ç»é»˜è®¤å¸®æˆ‘ä»¬å¼•å…¥ <code>promise</code>ã€ <code>es6.symbol</code> ç­‰ä¸€äº›é‡è¦æ¨¡å—çš„ <code>polyfill</code>ï¼Œæ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬é¢å¤–é…ç½®ã€‚ç›®å‰çš„é—®é¢˜ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯ç”¨çš„ç¬¬ä¸‰æ–¹åº“<code>vue-echarts-v3</code>æ˜¯ç”¨<code>es6</code>ç¼–å†™çš„ï¼Œç”±äº<code>vuecli3</code>åº•å±‚çš„<code>webpack</code>é…ç½®ä¸­ï¼Œ<code>node_modules</code>ä¸‹çš„åŒ…æ˜¯é»˜è®¤ä¸èµ°<code>Babel</code>ç¼–è¯‘çš„ï¼Œæˆ‘ä»¬åœ¨<code>npm</code>è£…çš„åŒ…ï¼Œä½œè€…æ²¡æœ‰å¸®æˆ‘ä»¬å»ç¼–è¯‘ï¼Œè€Œæ˜¯å¸Œæœ›æˆ‘ä»¬æ‰‹åŠ¨å»é…ç½®ç¼–è¯‘<a href="https://github.com/xlsdg/vue-echarts-v3#usage" target="_blank" rel="noopener noreferrer">vue-echarts-v3ä½¿ç”¨éœ€æ±‚<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>å¢åŠ <code>vue.config.js</code>é…ç½®ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  transpileDependencies<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules/vue-echarts-v3&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ğŸ‘†é—®é¢˜è§£å†³</p> <p>but...</p> <p>ğŸ‘‡è¿˜æœ‰ä¸ªé—®é¢˜</p> <p>å‡¡ç«¥é‹ååº”æœ‰çš„é¡µé¢åœ¨ieä¸­æ‰“ä¸å¼€ï¼Œç»è¿½è¸ªï¼Œå‡¡æ˜¯ç”¨åˆ°äº†<code>iview</code>çš„<code>Tabs</code>ç»„ä»¶éƒ½æ‰“ä¸å¼€ï¼Œé€šè¿‡æŠ¥é”™ä¿¡æ¯ï¼ŒæŸ¥åˆ°<code>Tabs</code>ç»„ä»¶é‡Œç”¨åˆ°äº†æ•°ç»„<code>findIndex</code>è¿™ä¸ªæ¯”è¾ƒæ–°çš„apiï¼Œè¿™ä¸ªapiåœ¨æ‰€æœ‰çš„ieä¸­éƒ½ä¸æ”¯æŒã€‚å› ä¸º<code>iview</code>ä¹Ÿæ˜¯<code>node_modules</code>ä¸‹çš„ï¼ŒåŒæ ·ä¹Ÿæ— æ³•èµ°Babelç¼–è¯‘ï¼Œæˆ‘é‡‡å–çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œæ‰‹åŠ¨å¼•ç”¨polyfillï¼Œä¸ç”¨ä¸Šé¢çš„æ–¹æ¡ˆäº†ï¼Œå› ä¸º<code>iview</code>ç”Ÿäº§ç‰ˆå·²ç»è¢«<code>Babel</code>ç¼–è¯‘è¿‡äº†ï¼Œåªä¸è¿‡æ²¡æœ‰ç”¨åˆ°<code>babel-polyfill</code>ã€‚</p> <p>åæ¥ï¼ŒæŸ¥é˜…<code>vuecli3</code>çš„<a href="https://cli.vuejs.org/zh/guide/browser-compatibility.html#polyfill" target="_blank" rel="noopener noreferrer">polyfillé€‰é¡¹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œå¯ä»¥é€šè¿‡é…ç½®å®ç°ç›¸å…³apiçš„<code>polyfill</code>ï¼Œç„¶åæŒ‰éœ€å¼•å…¥ï¼Œè¿™ç§ä¹Ÿæ˜¯ä¸€ç§ä¸é”™çš„è§£å†³æ–¹æ¡ˆã€‚</p> <h2 id="è‡ªåŠ¨æ³¨å†Œå…¨å±€ç»„ä»¶"><a href="#è‡ªåŠ¨æ³¨å†Œå…¨å±€ç»„ä»¶" class="header-anchor">#</a> è‡ªåŠ¨æ³¨å†Œå…¨å±€ç»„ä»¶</h2> <p>ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬æ ¹æ®UIè®¾è®¡çš„ç»„ä»¶ï¼Œå¼€å‘äº†è®¸å¤šå…¨å±€ç»„ä»¶ï¼Œæˆ‘å‘ç°æ¯ä¸€æ¬¡å¼€å‘å®Œæˆï¼Œéƒ½è¦å»<code>registerComponent.js</code>ä¸­è¿›è¡Œæ‰‹åŠ¨æ³¨å†Œï¼Œæ„Ÿè§‰æ¯”è¾ƒéº»çƒ¦ï¼Œäºæ˜¯æˆ‘å†³å®šç”¨è‡ªåŠ¨æ³¨å†Œç»„ä»¶æ–¹æ³•è¿›è¡Œå…¨å±€æ³¨å†Œï¼Œä¸€åŠ³æ°¸é€¸ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// æ£€ç´¢ç›®å½•ä¸‹çš„æ¨¡å—</span>
<span class="token keyword">const</span> req <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.vue$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

req<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// requireæ¨¡å—</span>
  <span class="token comment">// è¿‡æ»¤æ‰ä¸ä»¥ Nr å¼€å¤´çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚eyemap</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;Nr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> componentConfig <span class="token operator">=</span> <span class="token function">req</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span>
      fileName<span class="token punctuation">.</span>name <span class="token operator">||</span>
      fileName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^\.\/(.*\/)?/</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.vue$/</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿‡æ»¤æ‰ä¸ä»¥ Nr å¼€å¤´çš„ .vue æ–‡ä»¶</span>
    <span class="token operator">/</span><span class="token operator">^</span>Nr<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> componentConfig<span class="token punctuation">.</span>default <span class="token operator">||</span> componentConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ç„¶ååœ¨<code>registerComponent.js</code>ä¸­åŠ å…¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å…¨å±€ç»„ä»¶æ³¨å†Œ</span>
<span class="token keyword">import</span> <span class="token string">&quot;@/components&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿™æ ·ï¼Œåœ¨<code>components</code>æ–‡ä»¶ä¸‹çš„æ‰€æœ‰ç»„ä»¶éƒ½è§†ä¸ºå…¨å±€ç»„ä»¶äº†</p> <p><img src="https://img-1257816861.cos.ap-guangzhou.myqcloud.com/A966FB85-843C-475C-B830-1A1A736BB658.png" alt="å…¨å±€ç»„ä»¶"></p> <p>å…¶å®ï¼Œè‡ªåŠ¨æ³¨å†Œçš„æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨åˆ«çš„åœ°æ–¹è¿›è¡Œä½¿ç”¨ï¼Œä¾‹å¦‚è‡ªåŠ¨æ³¨å†Œ <code>vuex module</code>ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> files <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

files<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> moduleName <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  modules<span class="token punctuation">[</span>moduleName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">files</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> modules<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¿˜æœ‰è‡ªåŠ¨æ³¨å†Œå…¨å±€æŒ‡ä»¤ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> req <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex">/\.\/(?!index\.)\w*\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

req<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fileName</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> model <span class="token operator">=</span> <span class="token function">req</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.\//</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.js$/</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> model<span class="token punctuation">.</span>default <span class="token operator">||</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="ç³»ç»Ÿåˆå§‹åŒ–æµç¨‹"><a href="#ç³»ç»Ÿåˆå§‹åŒ–æµç¨‹" class="header-anchor">#</a> ç³»ç»Ÿåˆå§‹åŒ–æµç¨‹</h2> <p><img src="https://img-1257816861.cos.ap-guangzhou.myqcloud.com/%E7%B3%BB%E7%BB%9F%E5%8D%87%E7%BA%A7%E6%80%BB%E7%BB%93-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.png" alt="åˆå§‹åŒ–æµç¨‹"></p> <p>å›¾ä¸­æœ‰å‡ºç°<strong>è¯»å–é…ç½®æ–‡ä»¶</strong>è¿™ä¹ˆä¸€ç§è¿‡ç¨‹ã€‚æœ‰ä¸€ä¸ªå¾ˆé‡è¦éœ€æ±‚å°±æ˜¯ç³»ç»Ÿè¦ç»™åˆ°å®æ–½äººå‘˜åˆ°å®¢æˆ·ç°åœºè¿›è¡Œéƒ¨ç½²å’Œé…ç½®ï¼Œéœ€è¦æš´éœ²ä¸€äº›é…ç½®å‚æ•°ç»™ä»–ä»¬è¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚ <code>api</code> ã€åœ°å›¾æœåŠ¡åœ°å€è¿™äº›ã€‚å¼€å§‹æˆ‘æ˜¯ç”¨vuecli3æä¾›çš„ <code>.env</code> ç¯å¢ƒå˜é‡å»è§£å†³çš„ï¼Œä½†æ˜¯ä¸è¶³çš„æ˜¯æ¯æ¬¡ä¿®æ”¹å®Œéƒ½è¦é‡æ–° <code>yarn build</code> æ‰ç”Ÿæ•ˆï¼Œè¿™æ ·æ•ˆç‡å¤ªæ…¢äº†ã€‚æ‰€ä»¥æˆ‘å†³å®šæŠŠé…ç½®jsonæ–‡ä»¶æåˆ°å¤–é¢ï¼Œåœ¨ç³»ç»Ÿåˆå§‹åŒ–å‰å»è¯»å–å¹¶æ³¨å…¥åˆ°å†…éƒ¨ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³é‡æ–°æ‰“åŒ…çš„é—®é¢˜äº†ã€‚</p> <p>ä¸‹é¢è¯»é…ç½®æ˜¯å®ç°ç»†èŠ‚ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> cachedFn <span class="token keyword">from</span> <span class="token string">&quot;./cachedFn&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// æ— è®ºå¤šå°‘æ¬¡importæ‰§è¡Œå‡½æ•°ï¼Œéƒ½åªä¼šä½¿ç”¨è¢«ç¼“å­˜çš„å€¼</span>
<span class="token comment">// é¿å…é‡å¤è¯·æ±‚</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">cachedFn</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;static/appConfig.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> mapConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
      <span class="token string">&quot;static/mockdata/YZT_JSON/mapinit.json&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> env <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>__VERSION__ <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token constant">VERSION</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      config<span class="token operator">:</span> data<span class="token punctuation">[</span>env<span class="token punctuation">]</span><span class="token punctuation">,</span>
      mapConfig
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;æ— æ³•è¯»å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ï¼Œè¯·æ£€æµ‹æ˜¯å¦é…ç½®æ­£ç¡®ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å…¶ä¸­ï¼Œæœ‰ç”¨åˆ°äº†ä¸€ä¸ªç¼“å­˜å‡½æ•°ï¼Œå› ä¸ºæœ‰åˆ«çš„åœ°æ–¹ä¹Ÿéœ€è¦è¯»é…ç½®ï¼Œä½¿ç”¨è¯¥å‡½æ•°å¯ä»¥é¿å…é‡å¤è¯·æ±‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">cachedFn</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cacheMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hit <span class="token operator">=</span> cacheMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cacheMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> hit<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å–åˆ°é…ç½®ä¿¡æ¯åï¼Œæ³¨å…¥åˆ° <code>vuex</code> storeé‡Œé¢</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–é…ç½®ä¿¡æ¯</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> config<span class="token punctuation">,</span> mapConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆå§‹åŒ–åŸºç¡€ config</span>
    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">SET_CONFIG</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">MAP_INIT_CONFIG</span><span class="token punctuation">,</span> mapConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆå§‹åŒ– eyemap</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">ARCGISURL</span> <span class="token punctuation">}</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>
    Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>eyemap<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      load<span class="token operator">:</span> <span class="token punctuation">{</span>
        arcgisUrl<span class="token operator">:</span> <span class="token constant">ARCGISURL</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æŒ‚è½½å®ä¾‹</span>
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      router<span class="token punctuation">,</span>
      store<span class="token punctuation">,</span>
      <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> iview<span class="token punctuation">.</span>Notice<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;é…ç½®å‡ºé”™&quot;</span><span class="token punctuation">,</span>
      desc<span class="token operator">:</span> error
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>è¿™æ ·åœ¨vueç»„ä»¶é‡Œé¢ä¹Ÿå¯ä»¥æ‹¿åˆ°ç›¸å…³é…ç½®ä¿¡æ¯è¿›è¡Œä¸šåŠ¡å¼€å‘äº†ã€‚</p> <h2 id="æƒé™æ§åˆ¶"><a href="#æƒé™æ§åˆ¶" class="header-anchor">#</a> æƒé™æ§åˆ¶</h2> <p>å…³äºæƒé™æ§åˆ¶éƒ¨åˆ†ï¼Œå› ä¸ºå½“å‰ç³»ç»Ÿå†³å®šåªæ§åˆ¶åˆ°å­ç³»ç»Ÿå’Œå­ç³»ç»Ÿä¸‹çš„èœå•ï¼Œæ‰€ä»¥è¿™äº›éƒ½æ˜¯åœ¨è¿ç»´ç³»ç»Ÿä¸­è¿›è¡Œé…ç½®ï¼Œç„¶ååœ¨ç™»å½•æ—¶ä¼šå»è·å–ç›¸å…³ä¿¡æ¯ï¼Œç„¶ååœ¨<strong>æ¸²æŸ“å­ç³»ç»Ÿå’Œå­ç³»ç»Ÿèœå•åˆ—è¡¨å‰è¿›è¡Œè·¯ç”±æ¯”å¯¹è¿‡æ»¤</strong>ï¼Œå› ä¸ºåœ¨å‰é¢å·²ç»<strong>å®ç°ç”¨è¯»è·¯ç”±è¡¨</strong>å»æ¸²æŸ“ï¼Œæ‰€ä»¥æ¯”å¯¹è¿‡æ»¤è·¯ç”±ä¿¡æ¯ä¹Ÿä¸ç®—å¤æ‚ï¼Œä¹Ÿä¸éœ€è¦ç”¨åˆ°è·¯ç”±æ‹¦æˆªã€æŒ‡ä»¤æ§åˆ¶æ˜¾éšç­‰ç­‰ã€‚ä»£ç æš‚æ—¶ä¸è´´äº†ï¼Œæ€è·¯å°±æ˜¯è¿™æ ·å­ï¼Œä»¥åå¯èƒ½åœ¨æƒé™æ–¹é¢æœ‰æ›´æ·±çš„æ§åˆ¶ï¼Œåˆ°æ—¶å®ç°ä¹‹åå†å…·ä½“èŠèŠã€‚</p> <h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="header-anchor">#</a> å•å…ƒæµ‹è¯•</h2> <p>åœ¨ä¸€äº›æ¯”è¾ƒé‡è¦çš„å·¥å…·æ¨¡å—ï¼Œè¿˜æ˜¯éœ€è¦è¿›è¡Œå•å…ƒæµ‹è¯•çš„ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä»£ç çš„å¥å£®æ€§ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å¼•å…¥äº†å½“å‰æ¯”è¾ƒæµè¡Œçš„æµ‹è¯•æ¡†æ¶ <code>jest</code> ï¼Œå’Œ <code>mocha</code> ä¸åŒçš„æ˜¯ï¼Œ<code>jest</code> é‡Œé¢é›†æˆäº†å¾ˆå¤šå·¥å…·ï¼Œä¸éœ€è¦ä¸€ä¸ªä¸ªå»å®‰è£…ï¼Œåƒ <code>mocha</code> è¦é…åˆå¾ˆå¤šåº“å»ä½¿ç”¨ï¼Œæ‰€ä»¥è¦å­¦ä¹ è¿™äº›åº“çš„ <code>api</code>ï¼Œåœ¨ä¸åŒæ–‡æ¡£ä¸Šè¿›è¡Œåˆ‡æ¢å’Œç¿»é˜…ï¼Œä¸æ–¹ä¾¿çš„åŒæ—¶ä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼Œ<code>jest</code> åªéœ€è¦åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸‹è¿›è¡Œå­¦ä¹ ç¼–å†™å³å¯ã€‚</p> <p>å®‰è£…è¿‡ç¨‹ï¼Œåªéœ€è¦</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vue add @vue/unit-jest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¾¿å¯æå®š</p> <p>ä¸¾ä¸ªä¾‹å­æ¼”ç¤ºä¸‹ï¼Œ</p> <p>æ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ªè½®è¯¢å·¥å…·ç±»ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @class PollingAction
 * @param {Function}  callback[å›è°ƒå‡½æ•°]
 * @param {Number}  time[è½®è¯¢æ—¶é—´]
 * @param {immediate}  immediate[æ˜¯å¦ç«‹å³æ‰§è¡Œå›è°ƒå‡½æ•°]
 * @description  é€šè¿‡ç»™å®šçš„TIMEè¿›è¡Œè½®è¯¢æ“ä½œ
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">PollingAction</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰§è¡ŒçŠ¶æ€</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>running <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// è½®è¯¢é—´éš”</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> time<span class="token punctuation">;</span>
    <span class="token comment">// æ˜¯å¦ç«‹å³æ‰§è¡Œ</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>immediate <span class="token operator">=</span> immediate<span class="token punctuation">;</span>
    <span class="token comment">// callbackåˆ¤æ–­</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">=</span> callback<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;å‚æ•°1 å¿…é¡»æ˜¯ä¸ªå‡½æ•°&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// timeræ§åˆ¶</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// æ‰§è¡Œè½®è¯¢</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ˜¯å¦ç«‹å³æ‰§è¡Œ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>running <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token function">onAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">onAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å–æ¶ˆè½®è¯¢</span>
  <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>running <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p>ä¸‹é¢è¦å¯¹å…¶è¿›è¡Œä¸€äº›æµ‹è¯•ç¼–å†™ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> PollingAction <span class="token keyword">from</span> <span class="token string">&quot;@/utils/pollingAction&quot;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'æµ‹è¯• pollAction è½®è¯¢ç±»'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token comment">// mock setTimeout</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jest<span class="token punctuation">.</span><span class="token function">useFakeTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'æµ‹è¯•éç«‹å³æ‰§è¡Œè½®è¯¢'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> callback <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> po <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PollingAction</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> time<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è§¦å‘è½®è¯¢</span>
    po<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ­¤åˆ»ä¸åº”è¯¥è§¦å‘å›è°ƒï¼Œ1000ms åæ‰è§¦å‘</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æœ‰2ç§æ—¶é—´å¿«è¿›æ–¹æ³•</span>
    <span class="token comment">// jest.advanceTimersByTime(1000);</span>
    jest<span class="token punctuation">.</span><span class="token function">runOnlyPendingTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>setTimeout<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è®¾ç½®è§¦å‘æ—¶æœº</span>

    <span class="token comment">// æ¶ˆè€—æ—¶é—´</span>
    jest<span class="token punctuation">.</span><span class="token function">runOnlyPendingTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬2æ¬¡è§¦å‘</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>setTimeout<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å–æ¶ˆè½®è¯¢</span>
    po<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jest<span class="token punctuation">.</span><span class="token function">runOnlyPendingTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// po.cancel ç”Ÿæ•ˆï¼Œå›è°ƒä»ç„¶åªæ‰§è¡Œ 2 æ¬¡</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'æµ‹è¯•ç«‹å³æ‰§è¡Œè½®è¯¢'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> callback <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> po <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PollingAction</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> time<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    po<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// start ç«‹é©¬æ‰§è¡Œå›è°ƒ</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    jest<span class="token punctuation">.</span><span class="token function">runOnlyPendingTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>setTimeout<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenLastCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>Function<span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>

    po<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jest<span class="token punctuation">.</span><span class="token function">runOnlyPendingTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>é€šè¿‡æµ‹è¯•ï¼Œå¯ä»¥éªŒè¯è½®è¯¢ç±»å†™å¾—æœ‰æ²¡æœ‰æ¯›ç—…ï¼Œè¿™æ ·è™½ç„¶è¦å†™å¤šäº†äº›æµ‹è¯•ä»£ç ï¼Œä½†æ˜¯è¿™æ˜¯å€¼å¾—çš„ï¼Œè¿˜æœ‰ä¸€äº›é‡è¦çš„æ¨¡å—ä¹Ÿè¦è¦†ç›–å•å…ƒæµ‹è¯•ã€‚</p> <h2 id="è‡ªåŠ¨åŒ–éƒ¨ç½²"><a href="#è‡ªåŠ¨åŒ–éƒ¨ç½²" class="header-anchor">#</a> è‡ªåŠ¨åŒ–éƒ¨ç½²</h2> <p>æ‰‹åŠ¨æ‰“åŒ…éƒ¨ç½²æ˜¯ä¸€ä»¶éå¸¸ğŸ¤¢çš„äº‹æƒ…ï¼Œä¼šæµªè´¹æˆ‘ä»¬å¾ˆå¤šæ—¶é—´ï¼Œè¿™äº›è¿‡ç¨‹å®Œå…¨è¦äº¤ç»™æœºå™¨å»å¸®æˆ‘ä»¬å®Œæˆï¼Œæ‰€ä»¥å¿…é¡»è¦é‡‡ç”¨è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚å› ä¸ºæˆ‘ä»¬åœ¨ <code>gitlab</code> ä¸‹è¿›è¡Œå¼€å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™è¾¹ç”¨ <code>gitlab-hooks+jenkins+docker</code> æ–¹å¼å®ç°è‡ªåŠ¨åŒ–æ‰“åŒ…éƒ¨ç½²</p> <p>åŸºæœ¬æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p> <p><img src="https://img-1257816861.cos.ap-guangzhou.myqcloud.com/%E7%B3%BB%E7%BB%9F%E5%8D%87%E7%BA%A7%E6%80%BB%E7%BB%93-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B.png" alt="è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹"></p> <p>å¦‚æœè¦ç»†è¯´çš„è¯ï¼Œå†…å®¹ä¼šå¾ˆå¤šï¼Œå®Œå…¨å¯ä»¥å¦å¼€ç¯‡åšå®¢æ¥å™è¿°äº†ğŸ˜‚ã€‚è¿˜æœ‰ä¸€äº›å…³äºvueæŠ€å·§æ–¹é¢çš„â€œå¹²è´§â€ï¼Œåœ¨æˆ‘çš„ <a href="http://shooterblog.site/2018/11/04/Vue%E5%AE%9E%E8%B7%B5%E5%B0%8F%E7%BB%93(%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0)/" target="_blank" rel="noopener noreferrer">Vue å®è·µå°ç»“<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> åšå®¢ä¸­ä¼šæœ‰è®²ï¼Œå¤§å®¶å¦‚æœ‰å…´è¶£å¯ä»¥å»è½¬è½¬ã€‚</p> <h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h2> <p>ä¸ºäº†å‡çº§å¼€å‘è¿™ä¸ªç³»ç»Ÿï¼Œæˆ‘æ•´æ•´åœ¨ä¸Šæµ·å°é—­äº†70å¤šå¤©ï¼Œä½“éªŒäº†ä¸‹996ã€9107çš„ç”Ÿæ´»ã€‚ç»è¿‡å’Œ10å¤šä¸ªå‰ç«¯å°ä¼™ä¼´ä»¬çš„ä¸€èµ·åŠªåŠ›ï¼Œä»¥åŠå‡ ç™¾ä¸Šåƒæ¬¡çš„commitï¼Œç»ˆäºå®Œæˆäº†ç³»ç»Ÿä¼˜åŒ–å’Œä»£ç è¿ç§»ï¼Œå®åœ¨ä¸å®¹æ˜“ï¼Œä¸è¿‡æ”¶è·æ»¡æ»¡ï¼æœ€åï¼Œè¿™ç¯‡æ–‡ç« æ¯”è¾ƒé•¿ï¼Œæ„Ÿè°¢æ‚¨èƒ½è¯»åˆ°è¿™é‡Œï¼Œå¦‚æœæ–‡ä¸­å­˜åœ¨ä»€ä¹ˆä¸è¶³ä¹‹å¤„ï¼Œæˆ–è€…æœ‰å€¼å¾—æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡å‡ºï¼ŒChat at anytime!</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022/11/17 10:04:04</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/assets/js/app.69ab4a99.js" defer></script><script src="/assets/js/3.3b39e7a0.js" defer></script><script src="/assets/js/1.88acf310.js" defer></script><script src="/assets/js/27.c4fd3e8f.js" defer></script><script src="/assets/js/12.9e8433f0.js" defer></script>
  </body>
</html>
